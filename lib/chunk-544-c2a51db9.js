"use strict";(globalThis.webpackChunk_croquet_microverse=globalThis.webpackChunk_croquet_microverse||[]).push([[544],{1544:(t,e,i)=>{i.r(e),i.d(e,{default:()=>s});const s={modules:[{name:"Menu",actorBehaviors:[class MenuActor{setItems(i){console.log("setItems"),this.items&&this.items.forEach(t=>{this.unsubscribe(t.card.id,"fire","fire"),t.card.destroy()}),this.items=[],this.maxWidth=0,this.maxHeight=0,this.extentMap=new Map;for(let e=0;e<i.length;e++){var s=i[e];let t=s.card;var a=(t=t||this.createCard({name:s.label,className:"TextFieldActor",translation:[0,0,0],parent:this,type:"text",margins:{left:8,top:0,right:16,bottom:0},readOnly:!0,singleLine:!0,autoResize:!0,noDismissButton:!0,runs:[{text:s.label}],behaviorModules:["MenuItem"],width:1,textScale:.002,height:.15,noSave:!0,fullBright:!0,backgroundColor:s.selected?6316128:16777215})).measurement;this.extentMap.set(t.id,a),t._cardData.name=s.label,this.maxWidth=Math.max(this.maxWidth,a.width),this.items.push({label:s.label,card:t,selected:!!s.selected}),this.scriptSubscribe(t.id,"fire","relay")}let h=1,r=0;this.items.forEach(t=>{var e=this.extentMap.get(t.card.id),i=e?e.height:.15;t.card.set({translation:[((e?e.width:0)-this.maxWidth)/2,h-i/2,0]}),h-=void 0!==i?i:.15,r+=i}),this.maxHeight=r+.1,this.setCardData({width:this.maxWidth+.2,height:this.maxHeight,depth:.05,color:16777215,frameColor:6710886,fullBright:!0}),this.say("itemsUpdated")}relay(t){let e=this._cardData.multiple,i=this.service("ActorManager").get(t.id),s=this.items.find(t=>t.card===i);s&&(this.items.forEach(t=>{t.card===s.card?(t.selected=!t.selected,this.selectionChanged(t)):e||(t.selected=!1,this.selectionChanged(t))}),e&&"apply"===s.label&&(s.selected=!1,this.selectionChanged(s),t=this.items.map(t=>({label:t.label,selected:t.selected})),this.publish(this._parent.id,"fire",{selection:t,id:this.id})))}selectionChanged(t){t.card.setCardData({backgroundColor:t.selected?6316128:16777215})}}],pawnBehaviors:[class MenuPawn{setup(){this.scriptListen("_cardData","cardDataUpdated"),this.actor.items&&0<this.actor.items.length&&0<this.actor.maxWidth&&0<this.actor.maxHeight&&this.cardDataUpdated()}cardDataUpdated(){let t=this.shape.children.find(t=>"2d"===t.name);t.position.set(0,-this.properties2D.height/2+1.05,-.1)}}]},{name:"MenuItem",actorBehaviors:[class MenuItemActor{setup(){this.addEventListener("pointerTap","click")}click(t){let e=this.value;e.startsWith("-")||e.startsWith(" ")||this.publish(this.id,"fire",{id:this.id,name:this._cardData.name})}}],pawnBehaviors:[class MenuItemPawn{setup(){this.removeEventListener("pointerDoubleDown","onPointerDoubleDown"),this.addEventListener("pointerDoubleDown","nop")}}]}]}}}]);