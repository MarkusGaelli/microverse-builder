"use strict";(globalThis.webpackChunk_croquet_microverse=globalThis.webpackChunk_croquet_microverse||[]).push([[945],{945:(e,r,t)=>{t.r(r),t.d(r,{default:()=>a});const a={modules:[{name:"Collider",actorBehaviors:[class ColliderActor{setup(){let e;var r,t=this._cardData.rapierType,a=this._cardData.rapierShape,i=this._cardData.rapierSensor,o=this._cardData.rapierForce;e="positionBased"===t?Worldcore.RAPIER.RigidBodyDesc.newKinematicPositionBased():"static"===t?Worldcore.RAPIER.RigidBodyDesc.newStatic():Worldcore.RAPIER.RigidBodyDesc.newDynamic(),this.call("Rapier$RapierActor","createRigidBody",e);let s;"ball"===a?(r=this._cardData.rapierSize||1,r/=2,s=Worldcore.RAPIER.ColliderDesc.ball(r)):"cuboid"===a&&(r=[(r=this._cardData.rapierSize||[1,1,1])[0]/2,r[1]/2,r[2]/2],s=Worldcore.RAPIER.ColliderDesc.cuboid(...r)),s.setRestitution(this._cardData.rapierRestitution||.5),s.setFriction(this._cardData.rapierFriction||1),s.setDensity(this._cardData.rapierDensity||1.5),i&&(console.log("sensor"),this.registerIntersectionEventHandler("intersection"),s.setSensor(!0),s.setActiveEvents(Worldcore.RAPIER.ActiveEvents.CONTACT_EVENTS|Worldcore.RAPIER.ActiveEvents.INTERSECTION_EVENTS)),this.call("Rapier$RapierActor","createCollider",s),t||this.addEventListener("pointerTap","jolt"),o&&this.rigidBody.applyForce(o),this.listen("translating","translated")}jolt(){let e=this.rigidBody;e&&(e.applyForce({x:0,y:400,z:0},!0),e.applyTorque({x:50*Math.random(),y:20*Math.random(),z:50*Math.random()},!0))}translated(){this._translation[1]<-10&&this.destroy()}registerContactEventHandler(e){var r=this._behavior;let t=this.service("RapierPhysicsManager");this.contactEventHandlerBehavior=r.module.name+"$"+r.$behaviorName,this.contactEventHandlerMethod=e,t.registerContactEventHandler(this._target)}registerIntersectionEventHandler(e){var r=this._behavior;let t=this.service("RapierPhysicsManager");this.intersectionEventHandlerBehavior=r.module.name+"$"+r.$behaviorName,this.intersectionEventHandlerMethod=e,t.registerIntersectionEventHandler(this._target)}intersection(e,r,t){console.log(e,r,t),t&&(e.id!==this.id&&e.destroy(),r.id!==this.id&&r.destroy())}}],pawnBehaviors:[class ColliderPawn{setup(){var e,r,t;0===this.shape.children.length&&("ball"===(t=this.actor._cardData.rapierShape)?(e=this.actor._cardData.rapierSize||1,e=new Worldcore.THREE.SphereGeometry(e/2,32,16),r=new Worldcore.THREE.MeshStandardMaterial({color:this.actor._cardData.color||16711680}),this.obj=new Worldcore.THREE.Mesh(e,r)):"cuboid"===t&&(e=this.actor._cardData.rapierSize||[1,1,1],r=new Worldcore.THREE.BoxGeometry(...e),t=new Worldcore.THREE.MeshStandardMaterial({color:this.actor._cardData.color||16711680}),this.obj=new Worldcore.THREE.Mesh(r,t)),this.shape.add(this.obj)),this.removeEventListener("pointerDoubleDown","onPointerDoubleDown"),this.addEventListener("pointerDoubleDown","nop")}}]},{name:"Spray",actorBehaviors:[class SprayActor{setup(){void 0===this.running&&(this.running=!0,this.spray()),this.addEventListener("pointerDown","toggle")}randomColor(){var e=Math.random(),r=.8;let t,a,i,o,s,n,c,d;switch(n=r*(1-.8),c=r*(1-.8*(s=6*e-(o=Math.floor(6*e)))),d=r*(1-.8*(1-s)),o%6){case 0:t=r,a=d,i=n;break;case 1:t=c,a=r,i=n;break;case 2:t=n,a=r,i=d;break;case 3:t=n,a=c,i=r;break;case 4:t=d,a=n,i=r;break;case 5:t=r,a=n,i=c}return(Math.round(255*t)<<16)+(Math.round(255*a)<<8)+Math.round(255*i)}spray(){if(this.running){this.future(500).spray();var t=[-20,0,53],a=200*Math.random()-100,i=-100*Math.random();let e,r;var o,s=Math.random();s<.1?this.createCard({name:"earth",type:"object",translation:[t[0],19,t[2]-2],layers:["pointer"],scale:[.25,.25,.25],behaviorModules:["Rapier","FlightTracker","Collider"],rapierSize:2,rapierShape:"ball",rapierForce:{x:a,y:100,z:i},shadow:!0}):s<.2?this.createCard({name:"wooden box",type:"object",translation:[t[0],19,t[2]-2],layers:["pointer"],behaviorModules:["Rapier","Slides","Collider"],rapierSize:[1,1,1],rapierShape:"cuboid",rapierForce:{x:a,y:100,z:i},slides:["3Ty3Bbs4szi78KqNTyGrH0FVMEqE023P_eSIBhC8knE4PCAgJCdue3syPTgxJ3ohJ3o3JjslITEgej07eyF7EzACNi04HScVPwU3FgwwZxMsNSItIwEfAw0NZns9O3o3JjslITEgejk9NyY7IjEmJzF7PTs9AQIbOwY-Ag1mI2YtMTdjAy44GGxhGBsmHQU-AT4cMCYSImAcGSBnZHswNSA1exIeHBALYiMgPBcAYxwtYh0CBAQ_G2EyYx8sEm0WFjsOFSNiDDItAGMhNxk","3V_rhbXp8a1PLyayumtWeAAGGfyLTKjRrD4suceOjMuoPiIiJiVseXkwPzozJXgjJXg1JDknIzMieD85eSN5ETIANC86HyUXPQc1FA4yZREuNyAvIQMdAQ8PZHk_OXg1JDknIzMieDs_NSQ5IDMkJTN5Pzk_AwAZOQQ8AA9kIWQvMzVhASw6Gm5jGhkkHwc8AzweMiQQIGIeGyJlZnkyNyI3eT00JBoDOWACJxcHFC4OBQljGCM8GwEsPyAbHhwkBxsEbgEzARIkIBIFZxM"],shadow:!0}):(o=this.randomColor(),r=s<.6?(e="cuboid",[1,1,1]):(e="ball",2),this.createCard({type:"object",layers:["pointer"],translation:[t[0],19,t[2]-2],behaviorModules:["Rapier","Collider"],rapierSize:r,rapierForce:{x:a,y:100,z:i},rapierShape:e,color:o,shadow:!0}))}}toggle(){this.running=!this.running,this.running&&this.spray()}}]}]}}}]);